.386

DATA1 SEGMENT USE16
  MSG1 DB 'HELLO WORLD!$'
  LEN1 = $-MSG1
  MSG2 DB LEN1 DUP(0)
  CRLF DB 0DH,0AH,'$'
DATA1 ENDS

STACK1 SEGMENT USE16 STACK
STACK1 ENDS

CODE1 SEGMENT USE16
  ASSUME CS:CODE1, SS:STACK1, DS:DATA1, ES:DATA1
START:
  MOV AX, DATA1
  MOV DS, AX
  MOV ES, AX

  MOV CX, LEN1
  LEA SI, MSG1
  LEA DI, MSG2
  REP MOVSB
  
  LEA DX, MSG1
  MOV AH, 9
  INT 21H
  
  LEA DX, CRLF
  MOV AH, 9
  INT 21H
  
  LEA DX, MSG2
  MOV AH, 9
  INT 21H
  
  LEA DX, CRLF
  MOV AH, 9
  INT 21H

  ; 与XLAT指令类似，尽管带上操作数，但是仍然要设置SI，DI的指针
  ; XLAT 带操作数，也仍然要设置BX与AH的数值
  LEA SI, MSG1
  LEA DI, MSG2
  MOV CX, LEN1
  REP MOVS MSG2, MSG1
  
  LEA DX, MSG1
  MOV AH, 9
  INT 21H
  
  LEA DX, CRLF
  MOV AH, 9
  INT 21H
  
  LEA DX, MSG2
  MOV AH, 9
  INT 21H
  
  LEA DX, CRLF
  MOV AH, 9
  INT 21H

  MOV AH, 4CH
  INT 21H
CODE1 ENDS
  END START
  